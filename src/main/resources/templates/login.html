<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" context="text/html; charset=UTF-8">
    <title>Please Log In</title>
    <link rel="stylesheet" th:href="@{/css/stylesheet.css}">
</head>
<body>
<div id="form">
    <h1>Please Log In</h1>
<form id="loginForm" method="post" th:action="@{/login}">
    <input type="hidden"
           th:name="${_csrf.parameterName}"
           th:value="${_csrf.token}" />
    <div th:if="${param.logout}">
        <p>You have been logged out.</p>
    </div>
    <div th:if="${param.signedup}">
        <p>Your account has been activated, please log in</p>
    </div>
    <div th:if="${param.expired}" id="error-message">
        <p>Reset password link has expired.</p>
    </div>
    <div>
        <input name="username" placeholder="Username" type="text"/>
        <input name="password" placeholder="Password" type="password"/>
        <p class="errorMessage" th:if="${param.error}" data-th-text="${session.SPRING_SECURITY_LAST_EXCEPTION.message}"></p>
    </div>
    <div style="display: flex; flex-direction: column">
        <input type="submit" value="Sign in"/>
        <a id="createAccount" th:href="@{register}" style="margin-top: 20px">Not Registered? Create an account</a>
        <a id="forgotPassword" th:href="@{forgotPassword}" style="margin-top: 10px">Forgot your password?</a>
    </div>

</form>
</div>
<script type="text/javascript">
    document.getElementById("loginForm").addEventListener("keydown", function(event) {
        if (event.key === "Enter") {
            var activeElement = document.activeElement;
            if (activeElement.type === "password" || activeElement.type === "submit"
            || activeElement.id === "createAccount" || activeElement.id === "forgotPassword") {
                return true;
            } else {
                event.preventDefault();
            }
        }
    });
</script>
</body>
</html>