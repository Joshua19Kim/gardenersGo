<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" context="text/html; charset=UTF-8">
    <title>Edit Garden</title>
    <link  th:href="@{/css/stylesheet.css}" type="text/css" rel="stylesheet">
</head>
<body>

<nav th:insert="~{fragmentExample/fragments/navbar.html}"></nav>
<div>
    <div id="form" class="create-garden">
        <h1> Edit Garden </h1>
        <form id="editGardenForm" th:action="@{edit(gardenId=${garden.id})}" method="post">
            <div class="create-garden-row">
                <div>
                    <label for="name"> Name: </label>
                    <input type="text" class="form-control" id="name" maxlength="64" placeholder="Name"
                           th:name="name" th:value="*{name}" data-cy="name" autofocus
                           th:classappend="${nameError} ? 'error' : ''">
                    <span th:if="${nameError}" th:text="${nameError}" class="smallErrorMessage"></span>
                </div>
                <div>
                    <label for="size"> Size (m<sup>2</sup>): </label>
                    <input type="text" class="form-control" id="size" maxlength="12" placeholder=""
                           th:name="size" th:value="*{size}" data-cy="size" autofocus
                           th:classappend="${sizeError} ? 'error' : ''">
                    <span th:if="${sizeError}" th:text="${sizeError}" class="smallErrorMessage"></span>
                </div>
                <div>
                    <label for="description"> Description:</label>
                    <input type="text" class="form-control" id="description" maxlength="512" placeholder=""
                           th:name="description" th:value="*{description}" data-cy="description" autofocus
                           th:classappend="${descriptionError} ? 'error' : ''">
                    <span th:if="${descriptionError}" th:text="${descriptionError}" class="smallErrorMessage"></span>
                </div>
                <br/>
            </div>


            <div>
                <div style="display: flex; margin-top: 40px; justify-content: flex-end;">
                    <label class="LocationIQ-attribution">Search by LocationIQ.com</label>
                </div>
                <div style="display: flex;">
                    <div class="autocomplete-container" style="flex: 100%; margin-top: -20px;">
                        <label for="location"> Address: </label>
                        <input type="text" id="location" maxlength="128" placeholder="Start typing your address..."
                               th:name="location" th:value="*{location}" data-cy="location" autofocus
                               th:classappend="${locationError} ? 'error' : ''"
                        >
                        <span th:if="${locationError}" th:text="${locationError}" class="smallErrorMessage"></span>
                        <div class="autocomplete-results" id="autocomplete-results"></div>
                    </div>
                </div>
            </div>

            <div class="autocomplete-container">
                <div class="create-garden-row">
                    <div>
                        <label for="suburb">Suburb:</label>
                        <input type="text" id="suburb" th:name="suburb" th:value="*{suburb}">
                        <span th:if="${suburbError}" th:text="${suburbError}" class="smallErrorMessage"></span>

                    </div>
                    <div>
                        <label for="city">City:</label>
                        <input type="text" id="city" th:name="city" th:value="*{city}">
                        <span th:if="${cityError}" th:text="${cityError}" class="smallErrorMessage"></span>

                    </div>
                    <br/>
                </div>

                <div class="create-garden-row">
                    <div>
                        <label for="country">Country:</label>
                        <input type="text" id="country" th:name="country" th:value="*{country}">
                        <span th:if="${countryError}" th:text="${countryError}" class="smallErrorMessage"></span>

                    </div>
                    <div>
                        <label for="postcode">Postcode:</label>
                        <input type="text" id="postcode" th:name="postcode" th:value="*{postcode}">
                        <span th:if="${postcodeError}" th:text="${postcodeError}" class="smallErrorMessage"></span>

                    </div>
                    <br/>
                </div>
            </div>

            <button type="submit">Submit</button>
        </form>
        <a th:href="@{../gardens/details(gardenId=${garden.id})}">
            <button>Cancel</button>
        </a>
    </div>
    <script th:src="@{/javascript/locationAutocomplete.js}"></script>
    <script>
        document.getElementById("editGardenForm").addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                var activeElement = document.activeElement;
                if (activeElement.id === "size" || activeElement.tagName === "BUTTON") {
                    return true;
                } else {
                    event.preventDefault();
                }
            }
        });
    </script>
</div>
</body>
</html>